{% extends "DHT/base.html" %}
{% block title %}Tickets{% endblock %}

{% block content %}

<h2 class="page-title">ğŸ« Gestion des Tickets</h2>

<div class="card ticket-card">
    <div class="table-responsive">
        <table class="table ticket-table">
            <thead>
                <tr>
                    <th>#ID</th>
                    <th>Incident</th>
                    <th>AssignÃ© Ã </th>
                    <th>Status</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody>
                {% for t in tickets %}
                <tr>
                    <td class="fw-bold">#{{ t.id }}</td>
                    <td>{{ t.incident.id }}</td>
                    <td>
                        {% if t.assigned_to %}
                            <span class="badge badge-user">
                                ğŸ‘¤ {{ t.assigned_to.username }}
                            </span>
                        {% else %}
                            <span class="badge badge-muted">Non assignÃ©</span>
                        {% endif %}
                    </td>
                    <td>
                        <span class="status status-{{ t.status|lower }}">
                            {{ t.status }}
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'ticket_detail' t.id %}" class="btn btn-view">
                            ğŸ‘ Voir
                        </a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5" class="text-center text-muted">
                        Aucun ticket trouvÃ©.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
